<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Render TFT Data</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="champions.css">
    <link rel="stylesheet" href="traits.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">

    <script src="global.js"></script>
    <script src="global-defer.js" defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>

<body>
    <!-- MENU start-->
    <div class="nav">
        <ul class="nav-list">
            <li><a href="champions.html">
                    <span><i class="fa-solid fa-house"></i></span>
                    <span>Home</span></a></li>
            <li><a href="traits.html">
                    <span><i class="fa-solid fa-book-tanakh"></i></span>
                    <span>SET 14</span></a></li>
            <li><a href="augments.html">
                    <span><i class="fa-solid fa-fire"></i></span>
                    <span>Comp</span></a></li>
            <li><a href="items-list.html">
                    <span><i class="fa-solid fa-medal"></i></span>
                    <span>Giải Đấu</span></a></li>
            <li>
                <div>
                    <span><i class="fa-solid fa-bars"></i></span>
                    <span>Menu</span>
                </div>
            </li>
        </ul>
        <div class="menu-list">
            <ul>
                <li><i class="fa-solid fa-circle"></i><a href="#">Comp</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Tier S</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Reroll</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Fast 8</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Chuỗi thua</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Exodia</a></li>
            </ul>
            <ul>
                <li><i class="fa-solid fa-circle"></i><a href="">SET 14</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Tướng</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Tộc hệ</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Trang bị</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Lõi</a></li>
            </ul>
            <ul>
                <li><i class="fa-solid fa-circle"></i><a href="">GIẢI ĐẤU</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Xem Điểm Snapshot Ladder Rank Việt Nam Set 14</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Xem Điểm Cup Point APAC Set 14</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">5 Giải Đấu Lớn Trong Set 14</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Tài liệu chi tiết về các giải đấu</a></li>
                <li><i class="fa-solid fa-circle"></i><a href="">Lịch thi đấu</a></li>
            </ul>
        </div>
    </div>
    <!-- MENU end-->
    <div class="post-item">
        <div id="champions-menu"><a href="champions.html">60 Tướng</a><a href="traits.html">Tộc
                Hệ</a><a href="augments.html">Nâng Cấp</a><a href="items.html">Trang Bị</a></div>
        <div id="orgin-container">
            <div class="menu-btn-filter-category">
                <button class="btn-category-0">All</button>
                <button class="btn-category-1">Tộc</button>
                <button class="btn-category-2">Hệ</button>
                <button class="btn-category-3">Team Up</button>
            </div>
            <div class="traits-list"></div>
        </div>

        <script>

            // renderClassOrigin
            function renderClassOrigin(mainTraits, mainChampions) {
                const traitsList = document.querySelector(".traits-list");
                const champIcons = Object.fromEntries(mainChampions.map(({ name, icon, cost, apiName }) => [name, [icon, cost, apiName]]));

                let previousCategory = null;

                traitsList.innerHTML = mainTraits.map(({ name, desc, level, icon, champions, category }) => {
                    let renderChamp;

                    if (champions.length) {
                        renderChamp = champions.map(obj =>
                            `<li class="champ-cost-${champIcons[obj.name][1]}">
                             <img src="${convertURL(champIcons[obj.name][0])}" alt="${champIcons[obj.name][1]}" data-api-name="${obj.apiName}">
                          </li>`
                        ).join("");
                    } else {
                        const obj1 = Object.fromEntries(desc?.replace(/[.,!?]/g, "").split(" ").map(word => [word, true]));
                        const setKeys1 = new Set(Object.keys(obj1));

                        renderChamp = Object.keys(champIcons)
                            .filter(champion => setKeys1.has(champion))
                            .map(champion =>
                                `<li class="champ-cost-${champIcons[champion][1]}">
                        <img src="${convertURL(champIcons[champion][0])}" alt="${champion}" data-api-name="${champIcons[champion][2]}">
                    </li>`
                            )
                            .join("");
                    }

                    let categoryHeader = "";
                    if (category !== previousCategory) {
                        categoryHeader = `<div class="category-group trait-${category}">${category}</div>`;
                        previousCategory = category;
                    }

                    return `
            ${categoryHeader} 
            <div class="trait-card trait-${category}">
                <div class="trait-header">
                    <div class="trait-style">
                        <img src="${convertURL(icon)}" alt="${name}">
                        <h3>${name}</h3>
                    </div>
                    <ul class="champ-list">${renderChamp}</ul>
                </div>
                <div class="trait-desc">
                    <div class="origin-desc"><p>${desc}</p></div>
                    <div class="origin-level"><ul>${level.map(value => `<li>${value}</li>`).join("")}</ul></div>
                </div>
            </div>
        `;
                }).join("");
            }

        </script>
    </div>

</body>

</html>